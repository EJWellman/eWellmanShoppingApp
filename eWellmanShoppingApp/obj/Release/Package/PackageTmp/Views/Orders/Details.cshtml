@using System.linq;

@{
    ViewBag.Title = "Past Orders";
}

<h2>Past Orders</h2>



<ul class="collapsible popout" data-collapsible="accordion">
	@foreach (var order in ViewBag.pastOrders) {
		<li>
			<div class="collapsible-header"><i class="material-icons">dehaze</i> Order placed on: @order.orderDate</div>
			<div class="collapsible-body">
				<table class="striped">
					<thead>
						<tr>
							<th></th>
							<th>Product Name</th>
							<th>Unit Price</th>
							<th>Quantity</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						@foreach(var item in ViewBag.orderItems) {
							if (item.orderID.Equals(order.id)) {
							<tr>
								<td><img src="@item.item.mediaURL" style="width:125px; height:125px;" /></td>
								<td>@item.item.name</td>
								<td>@item.itemPrice</td>
								<td>@item.quantity</td>
								<td><a href="@Url.Action("Details", "Items", new { id=item.item.id })">Item Details</a></td>
							</tr>
							}
						}
					</tbody>
				</table>
			</div>
		</li>
	}
</ul>